<!doctype html>
<html layout:decorate="~{shared/layout}"
      xmlns:layout="http://www.ultraq.net.nz/thymeleaf/layout"
      xmlns:th="http://www.thymeleaf.org">
<head>
    <meta charset="UTF-8">
    <meta name="viewport"
          content="width=device-width, user-scalable=no, initial-scale=1.0, maximum-scale=1.0, minimum-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <link rel="stylesheet" href="../static/styles.css">
    <title>Register Page</title>
</head>
<body>
<div layout:fragment="content">
    <h2>Register</h2>
    <form action="/register" method="post">
        <label>Username:</label>
        <input type="text" name="username" required>
        <label>Password:</label>
        <input type="password" name="password" required>
        <input type="hidden" th:name="${_csrf.parameterName}" th:value="${_csrf.token}" />
        <button type="submit">Register</button>
    </form>
    <p th:if="${error}" th:text="${error}" style="color: red;"></p>
    <p>Already have an account? <a href="/login">Login</a></p>
</div>
</body>
</html>


<!--
<script defer>
    $(document).ready(function () {
        //toastr.success('Welcome to this page');
        getAllCategory();



        $("#isParent").on("change", function () {
            if ($(this).is(":checked")) {
                $("#categorySelect").hide();
            } else {
                $("#categorySelect").show();
            }
        });

        $(".submit").click(function (event) {
            event.preventDefault();

            let validationOK = submitCategoryValidation();
            if (validationOK) {
                let requestBody=  {
                    "name": null,
                    "parentId": null
                }
                let isParent = $("#isParent").is(":checked");
                let category = $("#category").val();
                let categorySelected = $("#categorySelect select :selected").val();
                if (isParent) {
                    requestBody.isParent = null;
                    requestBody.name = category;
                } else {
                    requestBody.name = category;
                    requestBody.parentId=categorySelected;
                    //requestBody.parentId = null;
                }

                var settings = {
                    "url": STRINGS.API_BASE_URL+"/Categories/create",
                    "method": "POST",
                    "timeout": 0,
                    "headers": {
                        "Content-Type": "application/json"
                    },
                    "data": JSON.stringify(requestBody),
                };

                $.ajax(settings).done(function (response) {
                    console.log(response);
                    toastr.success(response.message)
                    location.reload();
                    getAllCategory();
                });

            };
        });
    });

    function submitCategoryValidation() {
        let isParent = $("#isParent").is(":checked");
        let category = $("#category").val();
        let categorySelected = $("#categorySelect select").val();

        if (category === undefined || category === '' || category.trim() === '') {
            toastr.error("Category Name is required.")
            return false;
        }
        if (!isParent) {
            if (!categorySelected || categorySelected === 'Select') {
                toastr.error(" Parent Category is required.");
                return false;
            }
        }

        return true;
    }

    function getAllCategory(){

        var settings = {
            "url": STRINGS.API_BASE_URL+"/Categories/getAll",
            "method": "GET",
            "timeout": 0,
        };

        $.ajax(settings).done(function (response) {
            console.log(response);
            //toastr.success(response.message);
            console.log(response);
            $("#categorySelect select").empty();
            $("#categorySelect select").append(`<option selected>Select</option>`)
            response.content.forEach(current=>{
                $("#categorySelect select").append(`
                    <option value="` + current.id + `">` + current.name + `</option>
                `);
            })

        });
    }

</script>
-->
